$(document).ready(function(){function r(){var a=[{Level:c.Level,Name:c.Name},{Level:q.Level,Name:q.Name}];switch(n){case b.Level:a.push({Name:b.Name});break;case d.Level:a.push({Name:d.Name});break;case e.Level:a.push({Name:e.Name});break;case f.Level:a.push({Name:f.Name})}a[a.length-1].IsLast=!0;return a}function u(){var a=[{Level:p.Level,Name:p.Name}];switch(n){case g.Level:a.push({Name:g.Name,IsLast:!0});break;case h.Level:a.push({Name:h.Name,IsLast:!0});break;case k.Level:a.push({Name:k.Name,
IsLast:!0});break;case l.Level:a.push({Name:l.Name,IsLast:!0})}return a}var c={Level:1,Name:"\u0418\u043d\u0434\u0438\u0432\u0438\u0434\u0443\u0430\u043b\u044c\u043d\u044b\u0435"},q={Level:2,Name:function(){return t}},b={Level:21,Name:"\u0415\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442"},e={Level:22,Name:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0435"},d={Level:23,Name:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0435"},
f={Level:24,Name:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0435"},p={Level:3,Name:"\u041e\u0431\u0449\u0438\u0435"},g={Level:31,Name:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043d\u0430\u044f \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430"},l={Level:32,Name:"\u0412\u044b\u043f\u043b\u0430\u0442\u0430 \u0437\u0430\u0440\u043f\u043b\u0430\u0442\u044b"},k={Level:33,Name:"\u041e\u0431\u0449\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u043f\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c"},
h={Level:34,Name:"\u0421\u0432\u043e\u0434\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f"},n=0,t="",m=0,v={data:[{Level:c.Level,Name:c.Name.toUpperCase()},{Level:p.Level,Name:p.Name.toUpperCase()}]},w={bread:[{Name:p.Name,IsLast:!0}],data:[{Level:g.Level,Name:g.Name,IsDoc:!0},{Level:l.Level,Name:l.Name,IsDoc:!0},{Level:k.Level,Name:k.Name,IsDoc:!0},{Level:h.Level,Name:h.Name,IsDoc:!0}]},x={bread:r,data:[{Level:b.Level,
Name:b.Name,IsDoc:!0},{Level:e.Level,Name:e.Name,IsDoc:!0},{Level:d.Level,Name:d.Name,IsDoc:!0},{Level:f.Level,Name:f.Name,IsDoc:!0}]};$.ReportListDirector={Init:function(){this.InitActions();this.InitTemplate();this.InitDynamicData()},InitActions:function(){$(document).on("click",".report-folder>a, .report-bread",function(a){a=$(a.target).closest("[level]");n=parseInt(a.attr("level"));if(n==q.Level){var c=a.find(".folder-name").html();c&&(t=c);(a=a.attr("id-employee"))&&(m=a)}$.ReportListDirector.ReloadReportList()})},
InitDynamicData:function(){this.ReloadReportList()},InitTemplate:function(){$("#reportsTemplate").template("reportsTemplate")},ReloadReportList:function(){function a(a){$("#reports").empty();$.tmpl("reportsTemplate",a).appendTo("#reports")}function m(b){b.status?b.records&&a({bread:[{Level:c.Level,Name:c.Name,IsLast:!0}],data:b.records}):showErrorAlert(b.message)}$("#reports").html("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445...");switch(n){case 0:a(v);break;
case c.Level:$.post(BaseUrl+"reports/data",{},m,"json");break;case p.Level:a(w);break;case q.Level:a(x);break;case b.Level:case d.Level:case e.Level:case f.Level:a({bread:r()});break;case g.Level:case h.Level:case k.Level:case l.Level:a({bread:u()});break;default:alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445")}$.ReportListDirector.ShowReport(n)},ShowReport:function(a){$("#ReportIndividualDaily").toggle(a==b.Level);
$("#ReportIndividualMailing").toggle(a==d.Level);$("#ReportIndividualCorrespondence").toggle(a==e.Level);$("#ReportIndividualSalary").toggle(a==f.Level);$("#ReportOverallSalary").toggle(a==g.Level);$("#ReportOverallAllocation").toggle(a==h.Level);$("#ReportGeneralOfCustomers").toggle(a==k.Level);$("#ReportGeneralSalary").toggle(a==l.Level);switch(a){case b.Level:$.ReportTranslate.setEmployee(m);$.ReportTranslate.ReloadReportDailyMeta();break;case d.Level:$.ReportTranslate.setEmployee(m);$.ReportTranslate.ReloadReportMailing();
break;case e.Level:$.ReportTranslate.setEmployee(m);$.ReportTranslate.ReloadReportCorrespondence();break;case f.Level:$.ReportTranslate.setEmployee(m);$.ReportTranslate.ReloadReportSalary();break;case g.Level:$("#overlaySalarySite").find("input:first").click();break;case h.Level:$("#overallAllocationSite").find("input:first").click();break;case k.Level:$.ReportDirector.ReloadReportGeneralOfCustomers();break;case l.Level:$.ReportDirector.ReloadReportGeneralSalary()}}};$.ReportListDirector.Init()});
