$(document).ready(function(){$.AssolDocument={Init:function(){this.InitActions();this.InitDynamicData();this.InitTemplate()},InitActions:function(){$(document).on("click",".action-folder-open",function(a){$.AssolDocument.SetParent($(a.target).closest("[record]").attr("record"));$.AssolDocument.ReloadDocumentList()});$(document).on("click",".action-folder-remove",function(a){confirmRemove(function(){$.AssolDocument.RemoveDocument($(a.target).closest("[record]").attr("record"))})});$(document).on("click",
".action-document-remove",function(a){confirmRemove(function(){$.AssolDocument.RemoveDocument($(a.target).closest("[record]").attr("record"))})});$(document).on("click",".action-article-add",function(){window.location.href=BaseUrl+"documents/"+$.AssolDocument.GetParent()+"/add/file"});$(document).on("click",".action-article-remove",function(a){confirmRemove(function(){$.AssolDocument.RemoveArticle($(a.target).closest("[record]").attr("record"))})})},InitDynamicData:function(){this.ReloadDocumentList()},
InitTemplate:function(){$("#documentsTemplate").template("documentsTemplate")},ReloadDocumentList:function(a){this.ReloadData("#documents","documentsTemplate",a)},ReloadData:function(a,d,c){$(a).html("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445...");c=c||{Parent:$.AssolDocument.GetParent()};$.post(BaseUrl+"documents/data",c,function(b){b.status?b.records&&($(a).empty(),$.tmpl(d,b.records).appendTo(a)):showErrorAlert(b.message)},"json")},RemoveDocument:function(a){$.post(BaseUrl+
"documents/remove",{id:a},function(a){a.status?$.AssolDocument.ReloadDocumentList():showErrorAlert(a.message)},"json")},RemoveArticle:function(a){$.post(BaseUrl+"documents/remove_article",{id:a},function(a){a.status?$.AssolDocument.ReloadDocumentList():showErrorAlert(a.message)},"json")},parent:0,SetParent:function(a){this.parent=a},GetParent:function(){return this.parent}};$.AssolDocument.Init()});
