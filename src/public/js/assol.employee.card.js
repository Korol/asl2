$(document).ready(function(){function g(a){var b={};$.each(a,function(a,c){var d=$("#"+c);if(d.length){var e=d.is("div")?$(d).find("input:checked").val():$(d).val(),g=EmployeeRecord[c];$.isBlank(e)&&$.isBlank(g)||e==g||(b[c]=isDateField(d)?toServerDate(e):e,EmployeeRecord[c]=e)}});return b}function c(a){$("#alertErrorMessage").text(a);$("#alertError").slideDown()}function d(a){$("#alertSuccessMessage").text(a);$("#alertSuccess").slideDown()}function e(){$("#alertError").hide();$("#alertSuccess").hide()}
$.EmployeeCard={Init:function(){this.InitActions();this.InitDynamicData();this.InitTemplate()},InitActions:function(){$("#SavePersonalData").click(this.SavePersonalData);$("#SaveContacts").click(this.SaveContacts);$("#SaveRemove").click(this.SaveRemove);$("#SaveWork").click(this.SaveWork).click(this.SaveWorkSites);$("#SavePhotoAndVideo").click(this.SavePhotoAndVideo);$("#SaveComment").click(this.SaveComment);$("#EmployeeRemove").click(this.EmployeeRemove);$("#EmployeeMarkRemove").click(this.EmployeeMarkRemove);
$("#EmployeeRestore").click(this.EmployeeRestore);$("#EmployeeSavePassword").click(this.EmployeeSavePassword);$(document).on("click",".action-remove-agreement",function(a){confirmRemove(function(){$.EmployeeCard.RemoveAgreementRecord($(a.target).attr("record"))})});$(document).on("click",".action-remove-passport",function(a){confirmRemove(function(){$.EmployeeCard.RemovePassportRecord($(a.target).attr("record"))})});$(document).on("click",".action-remove-site",function(a){a=$(a.target).closest(".work-sites-block");
var b=a.attr("id-work-site"),f=a.attr("id-site");confirmRemove(function(){$.EmployeeCard.RemoveSiteRecord(f,b)})});$(document).on("click",".action-append-customer",function(a){var b=$(a.target).closest(".work-sites-block"),f=b.attr("id-work-site"),c=b.attr("id-site"),d=$(a.target).attr("id-customer");bootbox.confirm(0<d?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043a \u0441\u0430\u0439\u0442\u0443 <strong>"+Sites[c]+"</strong>?":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0441\u0435\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u043a \u0441\u0430\u0439\u0442\u0443 <strong>"+
Sites[c]+"</strong>?",function(a){a&&$.EmployeeCard.SaveSiteCustomer(c,f,d)})});$(document).on("click",".action-remove-customer",function(a){confirmRemove(function(){var b=$(a.target).closest(".work-sites-block"),f=b.attr("id-work-site"),b=b.attr("id-site");$.EmployeeCard.RemoveSiteCustomer(b,f,$(a.target).attr("record"))})});$(document).on("click",".action-remove-all-customers",function(a){confirmRemove(function(){var b=$(a.target).closest(".work-sites-block"),f=b.attr("id-work-site"),b=b.attr("id-site");
$.EmployeeCard.RemoveSiteAllCustomers(b,f)})});$(document).on("click",".action-save-children",function(a){$.EmployeeCard.SaveChildrenRecord($(a.target).closest("button").attr("record"))});$(document).on("click",".action-remove-children",function(a){confirmRemove(function(){$.EmployeeCard.RemoveChildrenRecord($(a.target).closest("button").attr("record"))})});$(document).on("click",".action-save-relative",function(a){$.EmployeeCard.SaveRelativeRecord($(a.target).closest("button").attr("record"))});
$(document).on("click",".action-remove-relative",function(a){confirmRemove(function(){$.EmployeeCard.RemoveRelativeRecord($(a.target).closest("button").attr("record"))})});$(document).on("click",".action-save-phone",function(a){$.EmployeeCard.SavePhoneRecord($(a.target).closest("button").attr("record"))});$(document).on("click",".action-remove-phone",function(a){confirmRemove(function(){$.EmployeeCard.RemovePhoneRecord($(a.target).closest("button").attr("record"))})});$(document).on("click",".action-save-email",
function(a){$.EmployeeCard.SaveEmailRecord($(a.target).closest("button").attr("record"))});$(document).on("click",".action-remove-email",function(a){confirmRemove(function(){$.EmployeeCard.RemoveEmailRecord($(a.target).closest("button").attr("record"))})});$(document).on("click",".action-save-skype",function(a){$.EmployeeCard.SaveSkypeRecord($(a.target).closest("button").attr("record"))});$(document).on("click",".action-remove-skype",function(a){confirmRemove(function(){$.EmployeeCard.RemoveSkypeRecord($(a.target).closest("button").attr("record"))})});
$(document).on("click",".action-save-socnet",function(a){$.EmployeeCard.SaveSocnetRecord($(a.target).closest("button").attr("record"))});$(document).on("click",".action-remove-socnet",function(a){confirmRemove(function(){$.EmployeeCard.RemoveSocnetRecord($(a.target).closest("button").attr("record"))})});$(document).on("keyup",".user-id-input",function(a){delay(function(){var b=$(a.target).closest(".work-sites-block").attr("id-site"),f=$(a.target).val();$.EmployeeCard.FindCustomer(b,f)},500)});$(document).on("change",
"#addEmployeeAvatar",function(a){$("#AvatarForm").submit()});$("#AvatarForm").ajaxForm(function(a){a.status?$.EmployeeCard.RefreshAvatar(a.id,a.FileName):c(a.message)});if(IsLoveStory)$(document).on("click",".action-blocked-employee",function(a){var b=$(a.target).prop("checked");bootbox.confirm((b?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c")+" \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u2116<strong>"+
EmployeeID+"</strong>?",function(f){f?$.post(BaseUrl+"employee/"+EmployeeID+"/update",{data:{IsBlocked:b?1:0}},function(a){a.status?d("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e "+(b?"\u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d":"\u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d")):c(a.message)},"json"):$(a.target).prop("checked",!b)})});$.each(EmployeeRights,function(a,
b){$("#employeeAccess_"+b.TargetEmployeeID).click()});$("#SaveEmployeeAccess").click(function(){var a=[];$("#employeeAccess").find("input:checked").each(function(){a.push($(this).val())});$.post(BaseUrl+"/employee/"+EmployeeID+"/rights",{Employee:EmployeeID,Employees:a},function(a){a.status?d("\u041f\u0440\u0430\u0432\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"):c(a.message)},
"json")});$('a[href="#Contacts"]').on("shown.bs.tab",function(){$.EmployeeCard.ReloadPhoneList();$.EmployeeCard.ReloadEmailList();$.EmployeeCard.ReloadSkypeList();$.EmployeeCard.ReloadSocnetList()});$('a[href="#PhotoAndVideo"]').on("shown.bs.tab",function(){$.EmployeeCard.ReloadAgreementList();$.EmployeeCard.ReloadPassportList()});$('a[href="#Work"]').on("shown.bs.tab",function(){$.EmployeeCard.ReloadSiteList()})},InitDynamicData:function(){this.ReloadChildrenList();this.ReloadRelativesList()},InitTemplate:function(){$("#childrenTemplate").template("childrenTemplate");
$("#relativeTemplate").template("relativeTemplate");$("#phoneTemplate").template("phoneTemplate");$("#skypeTemplate").template("skypeTemplate");$("#emailTemplate").template("emailTemplate");$("#socnetTemplate").template("socnetTemplate");$("#agreementTemplate").template("agreementTemplate");$("#passportTemplate").template("passportTemplate");$("#siteTemplate").template("siteTemplate");$("#clientsTemplate").template("clientsTemplate");$("#userIdFieldTemplate").template("userIdFieldTemplate")},FindCustomer:function(a,
b){var f="#UserIdField_"+a;$(f).html("\u041f\u043e\u0438\u0441\u043a...");b?$.post(BaseUrl+"employee/"+EmployeeID+"/site/"+a+"/customer/"+b+"/find",{},function(a){a.status?a.records?($(f).empty(),$.tmpl("userIdFieldTemplate",a.records).appendTo(f)):$(f).html("\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445..."):c(a.message)},"json"):$(f).html('<a href="javascript: void(0);" class="action-append-customer" id-customer="0">\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435\u0445</a>')},
RefreshAvatar:function(a,b){var f=0<a?BaseUrl+"thumb/?src=/files/images/"+b:BaseUrl+"public/img/avatar-example.png";$("#AvatarBig").attr("src",f);$("#AvatarCard").attr("src",f)},ReloadAgreementList:function(){this.ReloadData("#agreement","agreement","agreementTemplate")},ReloadPassportList:function(){this.ReloadData("#passport","passport","passportTemplate")},ReloadChildrenList:function(){this.ReloadData("#childrenList","children","childrenTemplate",{ID:0,EmployeeID:EmployeeID,SexID:0,FIO:"",DOB:""})},
ReloadRelativesList:function(){this.ReloadData("#relativeList","relative","relativeTemplate",{ID:0,EmployeeID:EmployeeID,FIO:"",Occupation:""})},ReloadPhoneList:function(){this.ReloadData("#phoneList","phone","phoneTemplate",{ID:0,EmployeeID:EmployeeID,Phone:""})},ReloadEmailList:function(){this.ReloadData("#emailList","email","emailTemplate",{ID:0,EmployeeID:EmployeeID,Email:""})},ReloadSiteList:function(){this.ReloadData("#siteList","site","siteTemplate",null,function(){$(this).each(function(a,
b){$.EmployeeCard.ReloadSiteCustomerList(b.ID)})})},ReloadSiteCustomerList:function(a){this.ReloadData("#ClientsList_"+a,"site/"+a+"/customer","clientsTemplate",null,function(){""!=$("#ClientsList_"+a).html()&&($("#rmAll"+a).remove(),$("#ClientsList_"+a).parent(".clients-list").append('<button class="btn assol-btn remove action-remove-all-customers" id="rmAll'+a+'" title="\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435\u0445</button>'))})},
ReloadSkypeList:function(){this.ReloadData("#skypeList","skype","skypeTemplate",{ID:0,EmployeeID:EmployeeID,Skype:""})},ReloadSocnetList:function(){this.ReloadData("#socnetList","socnet","socnetTemplate",{ID:0,EmployeeID:EmployeeID,Socnet:""})},ReloadData:function(a,b,f,d,e){$(a).html("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445...");$.post(BaseUrl+"employee/"+EmployeeID+"/"+b+"/data",{},function(b){b.status?b.records&&($(a).empty(),$.tmpl(f,b.records).appendTo(a),
d&&$.tmpl(f,d).appendTo(a),"function"===typeof e&&e.call(b.records),$("input:checked").change()):c(b.message)},"json")},SavePersonalData:function(){function a(a){a.status?d("\u041b\u0438\u0447\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"):c(a.message)}e();var b=g("SName FName MName DOB CardNumber MaritalStatus NameSatellite OccupationSatellite NameFather OccupationFather NameMother OccupationMother Forming FormingNameInstitution FormingFormStudy FormingFaculty WorkOccupation WorkReasonLeaving WorkLatestDirector Smoking".split(" "));
$.isBlank(b)||$.post(BaseUrl+"employee/"+EmployeeID+"/update",{data:b},a,"json")},SaveContacts:function(){function a(a){a.status?d("\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"):c(a.message)}e();var b=g(IsLoveStory?["Country","City","HomeAddress"]:["City","HomeAddress"]);$.isBlank(b)||$.post(BaseUrl+"employee/"+EmployeeID+"/update",{data:b},a,"json")},SaveRemove:function(){function a(a){a.status?
d("\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"):c(a.message)}e();var b=g(["ReasonForDeleted","ReasonForBlocked"]);$.isBlank(b)||$.post(BaseUrl+"employee/"+EmployeeID+"/update",{data:b},a,"json")},SaveWork:function(){function a(a){a.status?d("\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"):
c(a.message)}e();var b=g(["UserRole","JobComment"]);$.isBlank(b)||$.post(BaseUrl+"employee/"+EmployeeID+"/update",{data:b},a,"json");IsLoveStory&&(b=function(a){return a.has("span").length?a.find("span").html():a.html()},b={Monday:b($("#Monday")),MondayNote:b($("#MondayNote")),Tuesday:b($("#Tuesday")),TuesdayNote:b($("#TuesdayNote")),Wednesday:b($("#Wednesday")),WednesdayNote:b($("#WednesdayNote")),Thursday:b($("#Thursday")),ThursdayNote:b($("#ThursdayNote")),Friday:b($("#Friday")),FridayNote:b($("#FridayNote")),
Saturday:b($("#Saturday")),SaturdayNote:b($("#SaturdayNote")),Sunday:b($("#Sunday")),SundayNote:b($("#SundayNote"))},$.post(BaseUrl+"schedule/save",{employee:EmployeeID,data:b},a,"json"))},SaveWorkSites:function(){function a(a){a.status?(d("\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),a.insert&&$.EmployeeCard.ReloadSiteList()):c(a.message)}
e();var b=[];$("#WorkSite").find("input:checked").each(function(){b.push($(this).val())});0!=b.length&&$.post(BaseUrl+"employee/"+EmployeeID+"/site/save",{data:{sites:b}},a,"json")},SavePhotoAndVideo:function(){function a(a){a.status?(d("\u0412\u0438\u0434\u0435\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"),$("#videoConfirmFrame").attr("src",$("#VideoConfirm").val())):
c(a.message)}e();var b=g(["VideoConfirm"]);$.isBlank(b)||$.post(BaseUrl+"employee/"+EmployeeID+"/update",{data:b},a,"json")},SaveComment:function(){function a(a){a.status?d("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d"):c(a.message)}e();var b=g(["Comment"]);$.isBlank(b)||$.post(BaseUrl+"employee/"+EmployeeID+"/update",{data:b},a,"json")},EmployeeSavePassword:function(){function a(a){a.status?
d("\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"):c(a.message)}e();var b=g(["Password"]);$.isBlank(b)||$.post(BaseUrl+"employee/"+EmployeeID+"/update",{data:b},a,"json")},SaveChildrenRecord:function(a){e();a={RecordID:a,SexID:$("#ChildrenSex_"+a).find("input:radio:checked").val(),FIO:$("#ChildrenFIO_"+a).val(),DOB:toServerDate($("#ChildrenDOB_"+a).val())};$.post(BaseUrl+"employee/"+EmployeeID+"/children/save",a,function(a){a.status?
(d("\u0420\u0435\u0431\u0435\u043d\u043e\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),$.EmployeeCard.ReloadChildrenList()):c(a.message)},"json")},SaveRelativeRecord:function(a){e();a={RecordID:a,FIO:$("#RelativeFIO_"+a).val(),Occupation:$("#RelativeOccupation_"+a).val()};$.post(BaseUrl+"employee/"+EmployeeID+"/relative/save",a,function(a){a.status?(d("\u0420\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),
$.EmployeeCard.ReloadRelativesList()):c(a.message)},"json")},SavePhoneRecord:function(a){e();a={RecordID:a,Phone:$("#Phone_"+a).val()};$.post(BaseUrl+"employee/"+EmployeeID+"/phone/save",a,function(a){a.status?(d("\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),$.EmployeeCard.ReloadPhoneList()):c(a.message)},"json")},SaveEmailRecord:function(a){e();a={RecordID:a,Email:$("#Email_"+a).val()};$.post(BaseUrl+"employee/"+
EmployeeID+"/email/save",a,function(a){a.status?(d("E-Mail \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),$.EmployeeCard.ReloadEmailList()):c(a.message)},"json")},SaveSkypeRecord:function(a){e();a={RecordID:a,Skype:$("#Skype_"+a).val()};$.post(BaseUrl+"employee/"+EmployeeID+"/skype/save",a,function(a){a.status?(d("Skype \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),$.EmployeeCard.ReloadSkypeList()):c(a.message)},
"json")},SaveSocnetRecord:function(a){e();a={RecordID:a,Socnet:$("#Socnet_"+a).val()};$.post(BaseUrl+"employee/"+EmployeeID+"/socnet/save",a,function(a){a.status?(d("\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0435\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),$.EmployeeCard.ReloadSocnetList()):c(a.message)},"json")},SaveSiteCustomer:function(a,b,f){e();$.post(BaseUrl+"employee/"+EmployeeID+"/site/"+b+"/customer/"+
f+"/save",{},function(e){e.status?(0<f?d("\u041a\u043b\u0438\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043a \u0441\u0430\u0439\u0442\u0443 "+Sites[a]):d("\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043a \u0441\u0430\u0439\u0442\u0443 "+Sites[a]),$.EmployeeCard.ReloadSiteCustomerList(b)):c(e.message)},"json")},RemoveAgreementRecord:function(a){e();
$.post(BaseUrl+"employee/"+EmployeeID+"/agreement/"+a+"/remove",{},function(a){a.status?(d("\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"),$.EmployeeCard.ReloadAgreementList()):c(a.message)},"json")},RemovePassportRecord:function(a){e();$.post(BaseUrl+"employee/"+EmployeeID+"/passport/"+a+"/remove",{},function(a){a.status?(d("\u0421\u043a\u0430\u043d \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"),
$.EmployeeCard.ReloadPassportList()):c(a.message)},"json")},RemoveChildrenRecord:function(a){e();$.post(BaseUrl+"employee/"+EmployeeID+"/children/"+a+"/remove",{},function(a){a.status?(d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),$.EmployeeCard.ReloadChildrenList()):c(a.message)},"json")},RemoveRelativeRecord:function(a){e();$.post(BaseUrl+"employee/"+EmployeeID+"/relative/"+a+"/remove",{},function(a){a.status?(d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),
$.EmployeeCard.ReloadRelativesList()):c(a.message)},"json")},RemovePhoneRecord:function(a){e();$.post(BaseUrl+"employee/"+EmployeeID+"/phone/"+a+"/remove",{},function(a){a.status?(d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),$.EmployeeCard.ReloadPhoneList()):c(a.message)},"json")},RemoveEmailRecord:function(a){e();$.post(BaseUrl+"employee/"+EmployeeID+"/email/"+a+"/remove",{},function(a){a.status?(d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),
$.EmployeeCard.ReloadEmailList()):c(a.message)},"json")},RemoveSkypeRecord:function(a){e();$.post(BaseUrl+"employee/"+EmployeeID+"/skype/"+a+"/remove",{},function(a){a.status?(d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),$.EmployeeCard.ReloadSkypeList()):c(a.message)},"json")},RemoveSiteCustomer:function(a,b,f){e();$.post(BaseUrl+"employee/"+EmployeeID+"/site/"+a+"/customer/"+f+"/remove",{},function(a){a.status?(d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),
$.EmployeeCard.ReloadSiteCustomerList(b)):c(a.message)},"json")},RemoveSiteAllCustomers:function(a,b){e();$.post(BaseUrl+"employee/"+EmployeeID+"/site/"+a+"/worksite/"+b+"/removeall",{},function(a){a.status?(d("\u0417\u0430\u043f\u0438\u0441\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u044b"),$("#rmAll"+b).remove(),$.EmployeeCard.ReloadSiteCustomerList(b)):c(a.message)},"json")},RemoveSocnetRecord:function(a){e();$.post(BaseUrl+"employee/"+EmployeeID+"/socnet/"+
a+"/remove",{},function(a){a.status?(d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),$.EmployeeCard.ReloadSocnetList()):c(a.message)},"json")},RemoveSiteRecord:function(a,b){e();$.post(BaseUrl+"employee/"+EmployeeID+"/site/"+b+"/remove",{},function(b){b.status?(d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),$.EmployeeCard.ReloadSiteList(),
$("#WorkSite_"+a).click()):c(b.message)},"json")},EmployeeRemove:function(){confirmRemove(function(){e();$.post(BaseUrl+"employee/"+EmployeeID+"/remove",{IsFull:!0},function(a){a.status?(alert("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"),window.location=BaseUrl+"employee"):c(a.message)},"json")},"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0411\u0415\u0417\u0412\u041e\u0417\u0412\u0420\u0410\u0422\u041d\u041e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?")},
EmployeeMarkRemove:function(){confirmRemove(function(){e();$.post(BaseUrl+"employee/"+EmployeeID+"/remove",{},function(a){a.status?d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"):c(a.message)},"json")})},EmployeeRestore:function(){e();$.post(BaseUrl+"employee/"+EmployeeID+"/restore",{},function(a){a.status?d("\u0417\u0430\u043f\u0438\u0441\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0430"):
c(a.message)},"json")}};$.EmployeeCard.Init();$('a[data-toggle="tab"]').on("shown.bs.tab",function(){e()});$("body").on("hidden.bs.modal",".remoteModal",function(){$(this).removeData("bs.modal")});window.location.hash&&$('a[href="'+window.location.hash+'"]').tab("show")});
